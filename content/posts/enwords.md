---
title: "Encoding, Encryption, Hashing, Obfuscation"
date: "2020-08-10"
template: "post"
draft: false
category: "英語"
tags:
  - "english"
  - "security"
description: "分かるようで分からない4つの単語の概念を調べました"
socialImage: "/photo.jpg"
---

ある日ネットサーフィンをしていたら[Encoding vs. Encryption vs. Hashing vs. Obfuscation](https://danielmiessler.com/study/encoding-encryption-hashing-obfuscation/)という記事を見つけました。この四つの単語はそれぞれ実際には全く違う意味なんだけど「違いを説明せよ」と突然言われたら確かに説明できないなぁ、と思ったので元記事の内容に沿って各単語の意味を整理しておきます。
## 各単語の概要
#### Encoding
データをある一定の規則に基づいて可逆な別のデータに変換すること。和訳は**符号化**。
#### Encryption
データをアルゴリズムを使って特定の「鍵」によって復号可能な別のデータに変換すること。和訳は**暗号化**。
#### Hashing
データをアルゴリズムを使って非可逆な別のデータに変換すること。和訳は**ハッシング**。
#### Obfuscation
データの意味は変えないまま人間にとって読みにくい別のデータに変換すること。和訳は**難読化**。

## Encoding
- 和訳 : 符号化
- 可逆

符号化は比較的幅広い分野で当てはまる概念である。脳科学においても符号化（[記銘](https://bsd.neuroinf.jp/wiki/%E7%AC%A6%E5%8F%B7%E5%8C%96)）という概念があり、言語の翻訳もある意味では符号化である。またカメラの画像処理やアナログ音声のA/D変換においても符号化の概念が利用されている。挙げていくとキリがなくてただでさえ短い夏休みが無駄になってしまうので全て調べ上げることはできないが、要するに、**「あるデータを誰かにとって理解しやすいデータに規則正しく変換する」**というのが符号化の意味である。この概念を応用した例としてはデータの圧縮なども挙げられる。

情報科学であればコンピュータ、脳科学であれば脳、言語学であればその国の人にとって理解しやすいデータの形を作ってあげるのが、符号化の仕事であり、概念である。この記事を見ているであろう技術者の方に馴染みのある例をあげればUnicodeやBase64、ASCIIなどが符号化データに当たる。

上記で述べた概念を用いれば、DNSサーバーでURLをIPアドレスに変換する処理も、通信プロトコルが理解しやすいデータに変換するという意味では符号化に当てはまる。実際の通信では2進数でやりとりされるIPアドレスを人間様の読みやすいように10進数に変換する処理もまた、符号化である。

## Encryption
- 和訳 : 暗号化
- 可逆

暗号化は主に情報通信において使われることが多い。暗号の起源として知られるものとして [ヒエログリフ](https://www.y-history.net/appendix/wh0101-048.html)(象形文字)が挙げられるが、ヒエログリフそのものに秘匿性の意図はなく、単に後世で解読にえげつなく時間がかかったというだけなので厳密には暗号ではないとされている。古代から近代にかけては主に軍事的な目的で暗号が発明されることが多く、有名な[シーザー暗号](https://persol-tech-s.co.jp/corporate/security/article.html?id=80)やドイツ軍の[エニグマ](http://www1.accsnet.ne.jp/~hoshos231/howtobreakENIGMA.html)の暗号方式などもその一つである。古代の暗号から共通する目的として、**データを秘密に保つこと**が挙げられる。これに関しては直感的に分かりやすいので詳しく説明する必要はないが、カッコよく言えば「秘匿性」である。

現代の情報通信における暗号化では、一つの通信で使われる暗号アルゴリズムなどを、[暗号スイート](https://developer.mozilla.org/ja/docs/Glossary/Cipher_suite)という文字列で表す。例えば、
```
ECDHE-RSA-AES128-GCM-SHA256
```
という暗号スイートがあった場合、鍵交換には[ECDHE](https://ja.wikipedia.org/wiki/%E6%A5%95%E5%86%86%E6%9B%B2%E7%B7%9A%E3%83%87%E3%82%A3%E3%83%95%E3%82%A3%E3%83%BC%E3%83%BB%E3%83%98%E3%83%AB%E3%83%9E%E3%83%B3%E9%8D%B5%E5%85%B1%E6%9C%89)、鍵認証には[RSA](http://e-words.jp/w/RSA.html)、暗号化アルゴリズムには[AES128](https://www.weblio.jp/content/AES-128)、暗号モードは[GCM](https://ja.wikipedia.org/wiki/Galois/Counter_Mode)、ハッシュ関数には[SHA-256](https://gaiax-blockchain.com/sha-256)が使われているということを示す。

＊鍵認証と暗号化アルゴリズムの間に「_WITH_」が入る場合もある

## Hashing
- 和訳 : ハッシング
- 非可逆

ハッシングは主に情報通信で使われ、アルゴリズムに基づいて**あるデータを一見乱数に見える解読不可能で非可逆な別のデータに変換すること**をいう。暗号化と違って秘匿性の目的はなく、主に検索の高速化や改竄検知に使われる。

例えば、ハッシュ探索アルゴリズムは一般的な線形探索アルゴリズムに比べて高速な処理が期待でき、ハッシュを利用した[Landmark-based fingerprinting](https://qiita.com/xiao_ming/items/2c4f3ef469f2948998ba)はShazamの音声類似性検索のアルゴリズムにも採用されている。改竄検知でいえば、最も有名なのがSHA-1, SHA-2ハッシュ関数である。改竄検知の方法としてはデータをハッシュ化して暗号化したデータと共に送信し、受信側がデータを復号してハッシュ化した際に元のハッシュ値と違った場合に改竄が検出されるというものである。SHA-1に関しては2005年から脆弱性が指摘され、2017年に[Googleが実際に攻撃に成功した](https://japan.zdnet.com/article/35097102/)ことが決定的となって利用は大幅に減少した。2020年7月に[IPAから公開された](https://twitter.com/IPAjp/status/1280336337732644864)CRYPTRECの利用禁止暗号アルゴリズムにもノミネートされている。

## Obfascation
- 和訳 : 難読化
- 可逆

難読化とは、主にソースコードの解析防止や知的財産権の保護を目的として敢えて読みにくいコードに変換することである。概念を説明すれば**「誰かにとって扱いにくいデータに変換する」**、つまり概念的には符号化の対極に位置するものとも言える。難読化がソースコードの文脈以外で使われている例はぶっちゃけ思いつかないし、ググっても出てこないので「難読化=ソースコードの難読化」と考えて良いだろう。
 
ソースコードを難読化する理由としては、上述のように、実装している独自アルゴリズムのパクリや機能制限の回避を目的とした[リバースエンジニアリング](https://www.atmarkit.co.jp/ait/articles/0401/01/news051.html)を防ぐ目的がほとんどである。実際[JavaScript](https://obfuscator.io/)や[Python](http://pyarmor.dashingsoft.com/)など、主要なスクリプト言語ほぼ全てに難読化パッケージ/ツールがあるが、手作業でやるのは単純に初心者がコードを書くのと一緒になってしまうので完全に時間の無駄である。

＊筆者の場合は自分が書くコードは無意識に難読化されているので難読化ツールは特に必要ない。

ここからは筆者の個人的な意見だが、個人プロジェクト以外のコードはほぼ確実に他人と共有する必要があり、その時に難読化されたコードをレビューしろとか改変しろとか言われたらたまったもんじゃない。なので本当に隠したい処理はサーバーサイドで書き、どうしてもクライアントサイドで書かなければならない場合は開発が終了して保守のフェーズに入る際に難読化することをお勧めする。

---

といった感じでできるだけ各単語の概念を踏まえて整理したので、参考にしていただけるとありがたいです。

---
### 参考文献
https://www.netagent.co.jp/study/blog/hard/20180726.html

https://danielmiessler.com/study/encoding-encryption-hashing-obfuscation/

https://www.geeksforgeeks.org/encryption-encoding-hashing/

https://www.packetlabs.net/encryption-encoding-and-hashing/