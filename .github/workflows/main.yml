name: Upload to IPFS
# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the v7 branch
  push:
    branches: [ v7 ]
  pull_request:
    branches: [ v7 ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    name: Build and Test
    steps:
    - uses: actions/checkout@v2
      name: Check out repository
    - uses: actions/setup-node@v1
      name: Set up Node.js
      with:
        node-version: 16
    - run: |
        yarn install
        yarn build
      name: Build
    - uses: aquiladev/ipfs-action@v0.2.1-alpha.4
      name: Deploy to Pinata
      with:
        path: ./build
        service: pinata
        pinataKey: 3218f055d5dfeb5729e2
        pinataSecret: 23b5a758ccaf95cbc26f887ce2285f2705a7c79857f2a00a03fe9f344c28e5ee
        key: k51qzi5uqu5dkifu11s495phzpduvac2ibog9laoh9fnuk07zlkznm1yigx7mk
  
